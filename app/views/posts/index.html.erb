<h1>Slacker Newz</h1>


<%= link_to 'Sort by points', posts_path(@post, :sort_by => "points"), method: :get %> |
<%= link_to 'Sort by date', posts_path(@post, :sort_by => "date"), method: :get %> |


<ul>
  <% @posts.each do |post| %>
    <% upvoted_post = Post.find(post.id) %>
    <% current_time = Time.now %>

    <%= link_to '^', post_path(upvoted_post, post: { points: upvoted_post.points += 1 }, :sort_by => "points"), method: :patch %>
      <a href='<%= post.url %>'><%= post.title %></a> (<%= post.url %>)<br>
      <%= post.points %> points by <%= post.user.email %> <%= distance_of_time_in_words(post.created_at, current_time, options = {}) %> ago |
      <%= link_to post.comments.count('text', :distinct => true).to_s + " Comments", post_path(post.id)%><br><br>
  <% end %>
</ul>




<p><%= link_to "Add", new_post_path %></p>
